(window.webpackJsonp=window.webpackJsonp||[]).push([[3,7,8,9,16],Array(19).concat([function(t,e,r){"use strict";r.r(e);var n={name:"CardPin",computed:{transaction:function(){return this.$page.props.transaction}},props:{loading:Boolean},data:function(){return{form:{}}},methods:{submit:function(){var t=this.$refs.form;t.checkValidity()?this.$emit("input",this.form):t.classList.add("was-validated")}}},a=(r(39),r(0)),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{ref:"form",staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("p",[t._v(t._s(t.transaction.message))]),t._v(" "),r("label",{attrs:{for:"cc-pin"}},[t._v("Card pin")]),t._v(" "),r("app-input",{attrs:{type:"password",id:"cc-pin",placeholder:"XXXX",name:"card_pin",required:"","prepend-icon":"fe fe-lock"},model:{value:t.form.card_pin,callback:function(e){t.$set(t.form,"card_pin",e)},expression:"form.card_pin"}}),t._v(" "),r("app-button",{staticClass:"btn btn-primary btn-block",attrs:{loading:t.loading,type:"submit"}},[t._v("Submit")])],1)}),[],!1,null,"da6b2dd4",null);e.default=i.exports},function(t,e,r){"use strict";r.r(e);var n={name:"CreditCard",computed:{errors:function(){return this.$page.props.errors}},props:{loading:Boolean},data:function(){return{form:{name_on_card:"",card_number:"",expiry:"",cvv:""}}},methods:{submit:function(){var t=this.$refs.form;t.checkValidity()?this.$emit("input",this.form):t.classList.add("was-validated")}}},a=r(0),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{ref:"form",staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("p",[t._v("Enter your card details below")]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("label",{attrs:{for:"cc-name"}},[t._v("Name on card")]),t._v(" "),r("app-input",{attrs:{type:"text",id:"cc-name",placeholder:"John Doe",name:"name_on_card",errors:t.errors,"prepend-icon":"fe fe-user",required:""},model:{value:t.form.name_on_card,callback:function(e){t.$set(t.form,"name_on_card",e)},expression:"form.name_on_card"}})],1),t._v(" "),r("div",{staticClass:"col-12"},[r("label",{attrs:{for:"cc-number"}},[t._v("Card number")]),t._v(" "),r("app-input",{attrs:{type:"text",id:"cc-number",placeholder:"1234567890",name:"card_number",errors:t.errors,"prepend-icon":"fe fe-hash",required:""},model:{value:t.form.card_number,callback:function(e){t.$set(t.form,"card_number",e)},expression:"form.card_number"}})],1)]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("label",{attrs:{for:"cc-expiry"}},[t._v("Expiry")]),t._v(" "),r("app-input",{attrs:{type:"text",id:"cc-expiry",placeholder:"01/25",name:"expiry",errors:t.errors,"prepend-icon":"fe fe-calendar",required:""},model:{value:t.form.expiry,callback:function(e){t.$set(t.form,"expiry",e)},expression:"form.expiry"}})],1),t._v(" "),r("div",{staticClass:"col-6"},[r("label",{attrs:{for:"cc-cvv"}},[t._v("CVV")]),t._v(" "),r("app-input",{attrs:{type:"text",id:"cc-cvv",placeholder:"123",name:"cvv",errors:t.errors,"prepend-icon":"fe fe-lock",required:""},model:{value:t.form.cvv,callback:function(e){t.$set(t.form,"cvv",e)},expression:"form.cvv"}})],1)]),t._v(" "),r("app-button",{staticClass:"btn btn-primary btn-block",attrs:{loading:t.loading,type:"submit"}},[t._v("Make Payment")])],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,r){"use strict";r.r(e);var n={name:"Otp",computed:{transaction:function(){return this.$page.props.transaction}},props:{loading:Boolean},data:function(){return{form:{}}},methods:{submit:function(){var t=this.$refs.form;t.checkValidity()?this.$emit("input",this.form):t.classList.add("was-validated")}}},a=(r(41),r(0)),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{ref:"form",staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("p",[t._v(t._s(t.transaction.message))]),t._v(" "),r("label",{attrs:{for:"cc-otp"}},[t._v("OTP")]),t._v(" "),r("app-input",{attrs:{type:"text",id:"cc-otp",placeholder:"XXXXXX",name:"otp","prepend-icon":"fe fe-lock",required:""},model:{value:t.form.otp,callback:function(e){t.$set(t.form,"otp",e)},expression:"form.otp"}}),t._v(" "),r("app-button",{staticClass:"btn btn-primary btn-block",attrs:{loading:t.loading,type:"submit"}},[t._v("Submit")])],1)}),[],!1,null,"716f1814",null);e.default=i.exports},function(t,e,r){"use strict";r.r(e);var n={name:"Redirect",computed:{transaction:function(){return this.$page.props.transaction},allowedDomains:function(){return this.$page.props.config.allowed_cross_origin_domains}},data:function(){return{open:!0}},methods:{closeWindow:function(){this.$emit("close")}},created:function(){var t=this,e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"==e?"onmessage":"message",(function(e){t.allowedDomains.includes(e.origin)&&t.$emit("callback",e.data)}),!1)}},a=(r(43),r(0)),i=Object(a.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"frame-container"},[e("div",{staticClass:"frame-container-inner"},[e("app-button",{staticClass:"btn btn-sm btn-outline-danger close-btn",on:{click:this.closeWindow}},[e("i",{staticClass:"fe fe-x"}),this._v(" close")]),this._v(" "),e("iframe",{attrs:{src:this.transaction.redirect}})],1)]),this._v(" "),this._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"py-5 text-center text-muted"},[e("h4",[this._v("Kindly complete the transaction in the window")])])}],!1,null,"709b4785",null);e.default=i.exports},function(t,e,r){"use strict";r.r(e);var n={name:"VerifyAddress",components:{AddressInput:r(12).a},computed:{transaction:function(){return this.$page.props.transaction}},props:{loading:Boolean,order:Object},data:function(){return{form:{}}},methods:{submit:function(){this.$emit("input",this.form)}}},a=(r(45),r(0)),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{ref:"form",staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("p",[t._v(t._s(t.transaction.message))]),t._v(" "),r("address-input",{attrs:{name:"address",fill:t.order.billing.address},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("app-button",{staticClass:"btn btn-primary btn-block",attrs:{loading:t.loading,type:"submit"}},[t._v("Submit")])],1)}),[],!1,null,"7a3bd941",null);e.default=i.exports},,,,,,function(t,e,r){var n=r(40);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(9)(n,a);n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(42);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(9)(n,a);n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(44);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(9)(n,a);n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(46);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(9)(n,a);n.locals&&(t.exports=n.locals)},,,,,,,function(t,e,r){"use strict";r(29)},function(t,e,r){(t.exports=r(8)(!1)).push([t.i,"input[data-v-da6b2dd4]{text-align:center;letter-spacing:5px;font-size:200%}",""])},function(t,e,r){"use strict";r(30)},function(t,e,r){(t.exports=r(8)(!1)).push([t.i,"input[data-v-716f1814]{text-align:center;letter-spacing:5px;font-size:200%}",""])},function(t,e,r){"use strict";r(31)},function(t,e,r){(t.exports=r(8)(!1)).push([t.i,".frame-container[data-v-709b4785]{position:fixed;top:0;bottom:0;left:0;right:0;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5);z-index:99999999}.frame-container .frame-container-inner[data-v-709b4785]{position:relative;background:#fff;width:98%;height:98vh}.frame-container .close-btn[data-v-709b4785]{position:absolute;z-index:99999999;top:2px;right:2px}.frame-container iframe[data-v-709b4785]{border:none;width:100%;height:100%}@media screen and (min-width:768px){.frame-container .frame-container-inner[data-v-709b4785]{width:80%;height:80vh}}",""])},function(t,e,r){"use strict";r(32)},function(t,e,r){(t.exports=r(8)(!1)).push([t.i,"input[data-v-7a3bd941]{text-align:center;letter-spacing:5px;font-size:200%}",""])},,,,,,function(t,e,r){"use strict";r.r(e);var n=r(2),a=r.n(n),i=r(4),s=r(26),o=r(1),c=r(20),u=r(21),d=r(19),p=r(22);function l(t,e,r,n,a,i,s){try{var o=t[i](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,a)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){l(i,n,a,s,o,"next",t)}function o(t){l(i,n,a,s,o,"throw",t)}s(void 0)}))}}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h={name:"CheckoutPayment",components:{VerifyAddress:r(23).default,Redirect:p.default,Otp:u.default,CreditCard:c.default,CardPin:d.default},layout:function(t,e){return t(i.default,[t(s.default,[e])])},data:function(){return{startOver:!1,ui:{submittingCard:!1,submittingOtp:!1,submittingPin:!1,submittingAddress:!1,verifyingTransaction:!1}}},props:{order:Object},computed:{errors:function(){return this.$page.props.errors},transaction:function(){return this.$page.props.transaction}},methods:v(v({},Object(o.d)(["SET_TOAST"])),{},{submitCard:function(t){var e=this;return f(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.ui.submittingCard=!0,r.next=3,e.$inertia.post(e.route("order.pay",[e.order.reference]),t);case 3:e.ui.submittingCard=!1;case 4:case"end":return r.stop()}}),r)})))()},submitOtp:function(t){var e=this;return f(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.ui.submittingOtp=!0,r.next=3,e.$inertia.post(route("otp.validate",[e.transaction.transaction.reference]),{otp:t.otp});case 3:e.ui.submittingOtp=!1;case 4:case"end":return r.stop()}}),r)})))()},submitPin:function(t){var e=this;return f(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.ui.submittingPin=!0,r.next=3,e.$inertia.post(e.route("order.pay",[e.order.reference]),v(v({},e.transaction.card),{},{auth_mode:e.transaction.auth_mode,transaction_reference:e.transaction.transaction_reference,card_pin:t.card_pin}));case 3:e.ui.submittingPin=!1;case 4:case"end":return r.stop()}}),r)})))()},submitAddress:function(t){var e=this;return f(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.ui.submittingAddress=!0,r.next=3,e.$inertia.post(e.route("order.pay",[e.order.reference]),v(v({},e.transaction.card),{},{auth_mode:e.transaction.auth_mode,transaction_reference:e.transaction.transaction_reference,address:t}));case 3:e.ui.submittingAddress=!1;case 4:case"end":return r.stop()}}),r)})))()},verifyTransaction:function(){var t=this;return f(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.transaction.transaction.reference){e.next=5;break}return t.ui.verifyingTransaction=!0,e.next=4,t.$inertia.post(route("transaction.verify",[t.transaction.transaction.reference]));case 4:t.ui.verifyingTransaction=!1;case 5:case"end":return e.stop()}}),e)})))()},postCallback:function(t){var e=this;return f(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$inertia.post(route("post.flw.callback",[e.transaction.transaction.reference]),t);case 2:case"end":return r.stop()}}),r)})))()}}),watch:{$page:{immediate:!0,handler:function(t){if(this.startOver=!1,t.props.transaction)switch(t.props.transaction.action_required){case"verify_transaction":this.verifyTransaction();break;case"terminate":this.$inertia.visit(route("checkout.view"))}}}}},_=r(0),g=Object(_.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h2",{staticClass:"mb-3"},[t._v("Payment")]),t._v(" "),r("h6",{staticClass:"text-muted"},[t._v(t._s(t.order.reference))]),t._v(" "),!t.transaction||t.startOver?r("credit-card",{attrs:{loading:t.ui.submittingCard},on:{input:t.submitCard}}):"provide_pin"===t.transaction.action_required?r("card-pin",{attrs:{loading:t.ui.submittingPin},on:{input:t.submitPin}}):"provide_otp"===t.transaction.action_required?r("otp",{attrs:{loading:t.ui.submittingOtp},on:{input:t.submitOtp}}):"provide_address"===t.transaction.action_required?r("verify-address",{attrs:{order:t.order,loading:t.ui.submittingAddress},on:{input:t.submitAddress}}):"redirect"===t.transaction.action_required?r("redirect",{on:{callback:t.postCallback,close:t.postCallback}}):"verify_transaction"===t.transaction.action_required?r("div",{staticClass:"text-center py-5"},[r("h2",[t._v("Verifying transaction...")]),t._v(" "),r("p",{staticClass:"text-muted"},[t._v("Please hold on, while your transaction is verified...")])]):"requery_transaction"===t.transaction.action_required?r("div",{staticClass:"text-center py-5"},[r("h2",{staticClass:"text-danger"},[t._v("Transaction Failed")]),t._v(" "),r("p",{staticClass:"text-muted"},[t._v(t._s(t.transaction.message))]),t._v(" "),r("div",[r("app-button",{staticClass:"btn btn-primary my-2",attrs:{loading:t.ui.verifyingTransaction},on:{click:t.verifyTransaction}},[t._v("Requery Transaction")])],1),t._v(" "),t.transaction?r("app-button",{staticClass:"btn btn-outline-primary btn-sm my-2",on:{click:function(e){t.startOver=!0}}},[r("i",{staticClass:"fe fe-refresh-cw"}),t._v(" Use another card")]):t._e()],1):t._e()],1)}),[],!1,null,null,null);e.default=g.exports}])]);