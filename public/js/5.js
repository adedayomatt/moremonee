(window.webpackJsonp=window.webpackJsonp||[]).push([[5,8,9,14],{18:function(t,e,r){"use strict";r.r(e);var n={name:"CreditCard",computed:{errors:function(){return this.$page.props.errors}},props:{loading:Boolean},data:function(){return{form:{name_on_card:"Adedayo Matthews",card_number:"5531886652142950",expiry:"09/32",cvv:"564"}}},methods:{submit:function(){var t=this.$refs.form;t.checkValidity()?this.$emit("input",this.form):t.classList.add("was-validated")}}},a=r(0),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{ref:"form",staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("label",{attrs:{for:"cc-name"}},[t._v("Name on card")]),t._v(" "),r("app-input",{attrs:{type:"text",id:"cc-name",placeholder:"John Doe",name:"name_on_card",errors:t.errors,required:""},model:{value:t.form.name_on_card,callback:function(e){t.$set(t.form,"name_on_card",e)},expression:"form.name_on_card"}}),t._v(" "),r("div",{staticClass:"invalid-feedback"},[t._v("\n                Name on card is required\n            ")])],1),t._v(" "),r("div",{staticClass:"col-12"},[r("label",{attrs:{for:"cc-number"}},[t._v("Credit card number")]),t._v(" "),r("app-input",{attrs:{type:"text",placeholder:"1234567890",name:"card_number",errors:t.errors,required:""},model:{value:t.form.card_number,callback:function(e){t.$set(t.form,"card_number",e)},expression:"form.card_number"}}),t._v(" "),r("div",{staticClass:"invalid-feedback"},[t._v("\n                Credit card number is required\n            ")])],1)]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("label",{attrs:{for:"cc-expiration"}},[t._v("Expiration")]),t._v(" "),r("app-input",{attrs:{type:"text",placeholder:"01/25",name:"expiry",errors:t.errors,required:""},model:{value:t.form.expiry,callback:function(e){t.$set(t.form,"expiry",e)},expression:"form.expiry"}}),t._v(" "),r("div",{staticClass:"invalid-feedback"},[t._v("\n                Expiration date required\n            ")])],1),t._v(" "),r("div",{staticClass:"col-6"},[r("label",{attrs:{for:"cc-expiration"}},[t._v("CVV")]),t._v(" "),r("app-input",{attrs:{type:"text",placeholder:"123",name:"cvv",errors:t.errors,required:""},model:{value:t.form.cvv,callback:function(e){t.$set(t.form,"cvv",e)},expression:"form.cvv"}}),t._v(" "),r("div",{staticClass:"invalid-feedback"},[t._v("\n                Security code required\n            ")])],1)]),t._v(" "),r("app-button",{staticClass:"btn btn-primary btn-block",attrs:{loading:t.loading,type:"submit"}},[t._v("Make Payment")])],1)}),[],!1,null,null,null);e.default=i.exports},19:function(t,e,r){"use strict";r.r(e);var n={name:"OtpValidation",computed:{transaction:function(){return this.$page.props.transaction}},props:{loading:Boolean},data:function(){return{form:{}}},methods:{submit:function(){var t=this.$refs.form;t.checkValidity()?this.$emit("input",this.form):t.classList.add("was-validated")}}},a=(r(37),r(0)),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{ref:"form",staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.transaction.message?r("p",[t._v(t._s(t.transaction.message))]):t._e(),t._v(" "),r("app-input",{attrs:{type:"text",placeholder:"XXXXXX",name:"otp",required:""},model:{value:t.form.otp,callback:function(e){t.$set(t.form,"otp",e)},expression:"form.otp"}}),t._v(" "),r("app-button",{staticClass:"btn btn-primary btn-block",attrs:{loading:t.loading,type:"submit"}},[t._v("Complete Payment")])],1)}),[],!1,null,"26e1eb10",null);e.default=i.exports},20:function(t,e,r){"use strict";r.r(e);var n={name:"Redirect",computed:{transaction:function(){return this.$page.props.transaction}},data:function(){return{open:!0}},created:function(){var t=this,e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"==e?"onmessage":"message",(function(e){["https://ravesandboxapi.flutterwave.com","https://api.flutterwave.com"].includes(e.origin)&&(t.open=!1,t.$emit("callback",e.data))}),!1)}},a=(r(39),r(0)),i=Object(a.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"frame-container"},[e("div",{staticClass:"frame-container-inner"},[e("iframe",{attrs:{src:this.transaction.redirect}})])]),this._v(" "),e("h4",{staticClass:"text-center"},[this._v("Kindly complete the transaction in pop up")])])}),[],!1,null,"98383cb8",null);e.default=i.exports},27:function(t,e,r){var n=r(38);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(12)(n,a);n.locals&&(t.exports=n.locals)},28:function(t,e,r){var n=r(40);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(12)(n,a);n.locals&&(t.exports=n.locals)},37:function(t,e,r){"use strict";r(27)},38:function(t,e,r){(t.exports=r(11)(!1)).push([t.i,"input[data-v-26e1eb10]{text-align:center;letter-spacing:5px;font-size:200%}",""])},39:function(t,e,r){"use strict";r(28)},40:function(t,e,r){(t.exports=r(11)(!1)).push([t.i,".frame-container[data-v-98383cb8]{position:fixed;top:0;bottom:0;left:0;right:0;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.5);z-index:99999999}.frame-container .frame-container-inner[data-v-98383cb8]{background:#fff}.frame-container iframe[data-v-98383cb8]{border:none;width:100%;height:100%}@media screen and (min-width:768px){.frame-container .frame-container-inner[data-v-98383cb8]{width:80%;height:80vh}}",""])},43:function(t,e,r){"use strict";r.r(e);var n=r(2),a=r.n(n),i=r(4),o=r(23),s=r(1),c=r(18),u=r(19);function l(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){l(i,n,a,o,s,"next",t)}function s(t){l(i,n,a,o,s,"throw",t)}o(void 0)}))}}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={name:"CheckoutPayment",components:{Redirect:r(20).default,OtpValidation:u.default,CreditCard:c.default},layout:function(t,e){return t(i.default,[t(o.default,[e])])},data:function(){return{startOver:!1,ui:{submittingCard:!1,validatingOtp:!1,verifyingTransaction:!1}}},props:{order:Object},computed:{errors:function(){return this.$page.props.errors},transaction:function(){return this.$page.props.transaction}},methods:f(f({},Object(s.d)(["SET_TOAST"])),{},{submitCard:function(t){var e=this;return d(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.ui.submittingCard=!0,r.next=3,e.$inertia.post(e.route("order.pay",[e.order.reference]),t);case 3:e.ui.submittingCard=!1;case 4:case"end":return r.stop()}}),r)})))()},validateOtp:function(t){var e=this;return d(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.ui.validatingOtp=!0,r.next=3,e.$inertia.post(route("otp.validate",[e.transaction.transaction.reference]),{otp:t.otp},{onSuccess:function(){},onError:function(t){}});case 3:e.ui.validatingOtp=!1;case 4:case"end":return r.stop()}}),r)})))()},verifyTransaction:function(){var t=this;return d(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ui.verifyingTransaction=!0,e.next=3,t.$inertia.post(route("transaction.verify",[t.transaction.transaction.reference]));case 3:t.ui.verifyingTransaction=!1;case 4:case"end":return e.stop()}}),e)})))()},postCallback:function(t){var e=this;return d(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$inertia.post(route("post.flw.callback"),t);case 2:case"end":return r.stop()}}),r)})))()}}),watch:{$page:{immediate:!0,handler:function(t){if(t.props.transaction)switch(t.props.transaction.action_required){case"verify_transaction":this.verifyTransaction();break;case"terminate":this.$inertia.visit(route("checkout.view"))}}}}},b=r(0),h=Object(b.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h2",{staticClass:"mb-3"},[t._v("Payment")]),t._v(" "),r("h6",{staticClass:"text-muted"},[t._v(t._s(t.order.reference))]),t._v(" "),!t.transaction||t.startOver?r("credit-card",{attrs:{loading:t.ui.submittingCard},on:{input:t.submitCard}}):"otp"==t.transaction.action_required?r("otp-validation",{attrs:{loading:t.ui.validatingOtp},on:{input:t.validateOtp}}):"redirect"==t.transaction.action_required?r("redirect",{on:{callback:t.postCallback}}):"verify_transaction"==t.transaction.action_required?r("div",{staticClass:"text-center py-5"},[r("h2",[t._v("Verifying transaction...")]),t._v(" "),r("p",{staticClass:"text-muted"},[t._v("Please hold on, while your transaction is verified...")])]):"retry_verification"==t.transaction.action_required?r("div",{staticClass:"text-center py-5"},[r("h2",{staticClass:"text-danger"},[t._v("Could not verify transaction")]),t._v(" "),r("p",{staticClass:"text-muted"},[t._v(t._s(t.transaction.message))]),t._v(" "),r("app-button",{staticClass:"btn btn-outline-primary btn-block my-2",attrs:{loading:t.ui.verifyingTransaction},on:{click:t.verifyTransaction}},[t._v("Try Again")]),t._v(" "),r("app-button",{staticClass:"btn btn-primary btn-block my-2",on:{click:function(e){t.startOver=!0}}},[t._v("Re-Attempt Payment")])],1):t._e()],1)}),[],!1,null,null,null);e.default=h.exports}}]);